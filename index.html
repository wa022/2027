<!DOCTYPE html>
<html lang="ar">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>استعراض الكتب</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <h1>استعراض الكتب</h1>
  </header>
  <main>
    <div class="container" id="books-container"></div>
  </main>

  <script>
    const booksContainer = document.getElementById('books-container');

    fetch('https://sheets.googleapis.com/v4/spreadsheets/1eFNyOTc1sjFwoBYA5FzB4f-ecGs0w-COjOZ_mXLWBbo/values/Sheet1!A1:I100?key=AIzaSyB5WTjIR5OZt108xl9uQApzeoNRWuMyYRE')
      .then(response => response.json())
      .then(data => {
        const books = data.values.slice(1); // Skip header row

        books.forEach(book => {
          const title = book[0];
          const cover = book[1];
          const author = book[2];
          const review = book[4];
          const bookId = book[1]; // Assuming the book ID is in the second column (index 1)

          const bookElement = document.createElement('div');
          bookElement.classList.add('book');

          const coverImage = document.createElement('img');
          coverImage.src = cover;
          coverImage.classList.add('book-cover');

          const titleElement = document.createElement('h2');
          titleElement.textContent = title;
          titleElement.classList.add('book-title');

          const authorElement = document.createElement('p');
          authorElement.textContent = `بقلم: ${author}`;
          authorElement.classList.add('book-author');

          const reviewElement = document.createElement('p');
          reviewElement.textContent = review;
          reviewElement.classList.add('book-review');

          // Redirect to view.html with bookId as query parameter
          bookElement.addEventListener('click', () => {
            window.location.href = `view.html?bookId=${bookId}&title=${title}&cover=${cover}&author=${author}&review=${review}`;
          });

          bookElement.appendChild(coverImage);
          bookElement.appendChild(titleElement);
          bookElement.appendChild(authorElement);
          bookElement.appendChild(reviewElement);

          booksContainer.appendChild(bookElement);
        });
      });
  </script>
</body>

</html>
